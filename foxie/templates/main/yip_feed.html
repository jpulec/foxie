{% load main_extras %}
<ul id="yip_feed" class="list-group">
    {% for yip in yips %}
    <small>{{ yip.user.username }} at {{ yip.dt }}</small>
    <li class="list-group-item">
    <p style="word-wrap: break-word">
    {% for word in yip.get_words %}
    {% if word|first == '#' %}
    <a href="/trending/{{ word|slice:"1:" }}/">{{ word }}</a>
    {% elif word|first == '@' %}
    <a href="/profile/{{ word|slice:"1:" }}/">{{ word }}</a>
    {% elif word|is_video %}
    <a href="{{ word|full_url }}">{{ word }}</a>
    <div id="ytplayer_{{ word }}"></div>
    <script>
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/player_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// Replace the 'ytplayer' element with an <iframe> and
// YouTube player after the API code downloads.
var player;
function onYouTubePlayerAPIReady() {
    player = new YT.Player('ytplayer_{{ word }}', {
height: '280',
width: '100%',
videoId: '{{ word|get_query_arg:"v" }}'
});
}
    </script>
    {% elif word|is_image %}
    <a href="{{ word|full_url }}">{{ word|full_url }}</a>
    <img style="width: 100%" src={{ word|full_url }}></img>
    {% elif word|valid_url %}
    <a href="{{ word|full_url }}">{{ word }}</a>
    {% else %}

    {{ word }}
    {% endif %}
    {% endfor %}
    </p>
    </li>
    {% endfor %}
</ul>
